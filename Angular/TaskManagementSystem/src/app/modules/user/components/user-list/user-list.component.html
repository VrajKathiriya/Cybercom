<h1>Users List</h1>

<button mat-raised-button color="primary" (click)="addUser()">
  <mat-icon>add</mat-icon>Add User
</button>

<mat-table [dataSource]="users">
  <!-- Define columns -->
  <ng-container matColumnDef="id">
    <mat-header-cell *matHeaderCellDef> ID </mat-header-cell>
    <mat-cell *matCellDef="let user"> {{ user.id }} </mat-cell>
  </ng-container>

  <ng-container matColumnDef="name">
    <mat-header-cell *matHeaderCellDef> Name </mat-header-cell>
    <mat-cell *matCellDef="let user">
      <mat-form-field appearance="outline">
        <input matInput [(ngModel)]="user.name" />
      </mat-form-field>
    </mat-cell>
  </ng-container>

  <ng-container matColumnDef="email">
    <mat-header-cell *matHeaderCellDef> Email </mat-header-cell>
    <mat-cell *matCellDef="let user">
      <mat-form-field appearance="outline">
        <input matInput [(ngModel)]="user.email" />
      </mat-form-field>
    </mat-cell>
  </ng-container>

  <ng-container matColumnDef="password">
    <mat-header-cell *matHeaderCellDef> Password </mat-header-cell>
    <mat-cell *matCellDef="let user">
      <mat-form-field appearance="outline">
        <input matInput [(ngModel)]="user.password" />
      </mat-form-field>
    </mat-cell>
  </ng-container>

  <ng-container matColumnDef="role">
    <mat-header-cell *matHeaderCellDef> Role </mat-header-cell>
    <mat-cell *matCellDef="let user">
      <mat-form-field appearance="outline">
        <mat-select [(ngModel)]="user.role" placeholder="select role">
          <mat-option *ngFor="let role of roles" [value]="role">
            {{ role }}
          </mat-option>
        </mat-select>
      </mat-form-field>
    </mat-cell>
  </ng-container>

  <ng-container matColumnDef="actions">
    <mat-header-cell *matHeaderCellDef> Actions </mat-header-cell>
    <mat-cell *matCellDef="let user">
      <button mat-raised-button color="accent" (click)="onSave(user)">
        Save
      </button>
      <mat-icon
        color="warn"
        fontIcon="delete"
        (click)="onDelete(user.id)"
        style="cursor: pointer"
      ></mat-icon>
    </mat-cell>
  </ng-container>

  <!-- Define the table rows -->
  <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
  <mat-row *matRowDef="let row; columns: displayedColumns"> </mat-row>
</mat-table>
